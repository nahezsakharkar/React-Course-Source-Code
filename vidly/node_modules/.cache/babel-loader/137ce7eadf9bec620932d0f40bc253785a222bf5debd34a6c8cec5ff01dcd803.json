{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\NAHEZ SAKHARKAR\\\\OneDrive\\\\Desktop\\\\React Course Source Code\\\\vidly\\\\src\\\\components\\\\helpers\\\\form.jsx\";\nimport Joi from \"joi-browser\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const validate = (data, schema) => {\n  const result = Joi.validate(data, schema, {\n    abortEarly: false\n  });\n  if (!result.error) return null;\n  const formErrors = {};\n  for (let item of result.error.details) {\n    formErrors[item.path[0]] = item.message;\n  }\n  return formErrors;\n};\nexport const validateProperty = (_ref, schema) => {\n  let {\n    id,\n    value\n  } = _ref;\n  const obj = {\n    [id]: value\n  };\n  const currentSchema = {\n    [id]: schema[id]\n  };\n  const {\n    error\n  } = Joi.validate(obj, currentSchema);\n  return error ? error.details[0].message : null;\n};\nexport const handleChange = (e, schema, data, setData, errors, setErrors) => {\n  const {\n    id,\n    value\n  } = e.target;\n  setData(prevState => ({\n    ...prevState,\n    [id]: value\n  }));\n  const errorMessage = validateProperty({\n    id,\n    value\n  }, schema);\n  if (errorMessage) {\n    setErrors(prevState => ({\n      ...prevState,\n      [id]: errorMessage\n    }));\n  } else delete errors[id];\n};\nexport const handleSubmit = (e, data, schema, errors, setErrors, doSubmit) => {\n  var _validate;\n  e.preventDefault();\n  setErrors((_validate = validate(data, schema)) !== null && _validate !== void 0 ? _validate : {});\n  doSubmit();\n};\nexport const renderInput = () => {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"form-group mt-3\",\n    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n      htmlFor: \"username\",\n      children: \"(Username)\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      autoFocus: true,\n      onChange: e => handleChange(e, schema, data, setData, errors, setErrors),\n      id: \"username\",\n      type: \"text\",\n      className: \"form-control mt-2\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 7\n    }, this), errors.username && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"alert alert-danger\",\n      children: errors.username\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 5\n  }, this);\n};\nexport const renderButton = () => {};","map":{"version":3,"names":["Joi","validate","data","schema","result","abortEarly","error","formErrors","item","details","path","message","validateProperty","id","value","obj","currentSchema","handleChange","e","setData","errors","setErrors","target","prevState","errorMessage","handleSubmit","doSubmit","preventDefault","renderInput","username","renderButton"],"sources":["C:/Users/NAHEZ SAKHARKAR/OneDrive/Desktop/React Course Source Code/vidly/src/components/helpers/form.jsx"],"sourcesContent":["import Joi from \"joi-browser\";\r\n\r\nexport const validate = (data, schema) => {\r\n  const result = Joi.validate(data, schema, {\r\n    abortEarly: false,\r\n  });\r\n  if (!result.error) return null;\r\n\r\n  const formErrors = {};\r\n  for (let item of result.error.details) {\r\n    formErrors[item.path[0]] = item.message;\r\n  }\r\n  return formErrors;\r\n};\r\n\r\nexport const validateProperty = ({ id, value }, schema) => {\r\n  const obj = { [id]: value };\r\n  const currentSchema = { [id]: schema[id] };\r\n  const { error } = Joi.validate(obj, currentSchema);\r\n  return error ? error.details[0].message : null;\r\n};\r\n\r\nexport const handleChange = (e, schema, data, setData, errors, setErrors) => {\r\n  const { id, value } = e.target;\r\n  setData((prevState) => ({\r\n    ...prevState,\r\n    [id]: value,\r\n  }));\r\n\r\n  const errorMessage = validateProperty({ id, value }, schema);\r\n  if (errorMessage) {\r\n    setErrors((prevState) => ({\r\n      ...prevState,\r\n      [id]: errorMessage,\r\n    }));\r\n  } else delete errors[id];\r\n};\r\n\r\nexport const handleSubmit = (e, data, schema, errors, setErrors, doSubmit) => {\r\n  e.preventDefault();\r\n\r\n  setErrors(validate(data, schema) ?? {});\r\n\r\n  doSubmit();\r\n};\r\n\r\nexport const renderInput = () => {\r\n  return (\r\n    <div className=\"form-group mt-3\">\r\n      <label htmlFor=\"username\">(Username)</label>\r\n      <input\r\n        autoFocus\r\n        onChange={(e) =>\r\n          handleChange(e, schema, data, setData, errors, setErrors)\r\n        }\r\n        id=\"username\"\r\n        type=\"text\"\r\n        className=\"form-control mt-2\"\r\n      />\r\n      {errors.username && (\r\n        <div className=\"alert alert-danger\">{errors.username}</div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport const renderButton = () => {};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}