{"ast":null,"code":"import Joi from \"joi-browser\";\nimport { useState } from \"react\";\n\n// const [data, setData] = useState({});\n// const [errors, setErrors] = useState({});\n\nexport const validate = (data, schema) => {\n  const result = Joi.validate(data, schema, {\n    abortEarly: false\n  });\n  if (!result.error) return {\n    yeah: \"\"\n  };\n  const formErrors = {};\n  for (let item of result.error.details) {\n    formErrors[item.path[0]] = item.message;\n  }\n  return formErrors;\n};\nexport const validateProperty = (_ref, schema) => {\n  let {\n    id,\n    value\n  } = _ref;\n  const obj = {\n    [id]: value\n  };\n  const currentSchema = {\n    [id]: schema[id]\n  };\n  const {\n    error\n  } = Joi.validate(obj, currentSchema);\n  return error ? error.details[0].message : null;\n};\nexport const handleChange = (e, schema, data, setData, errors, setErrors) => {\n  const {\n    id,\n    value\n  } = e.target;\n  setData(prevState => ({\n    ...prevState,\n    [id]: value\n  }));\n  const errorMessage = validateProperty({\n    id,\n    value\n  }, schema);\n  if (errorMessage) {\n    setErrors(prevState => ({\n      ...prevState,\n      [id]: errorMessage\n    }));\n  } else delete errors[id];\n};\nexport const handleSubmit = (e, data, schema, errors, setErrors, doSubmit) => {\n  e.preventDefault();\n  setErrors(validate(data, schema));\n  console.log(errors);\n  // if (errors) return;\n\n  doSubmit();\n};","map":{"version":3,"names":["Joi","useState","validate","data","schema","result","abortEarly","error","yeah","formErrors","item","details","path","message","validateProperty","id","value","obj","currentSchema","handleChange","e","setData","errors","setErrors","target","prevState","errorMessage","handleSubmit","doSubmit","preventDefault","console","log"],"sources":["C:/Users/NAHEZ SAKHARKAR/OneDrive/Desktop/React Course Source Code/vidly/src/components/helpers/form.jsx"],"sourcesContent":["import Joi from \"joi-browser\";\r\nimport { useState } from \"react\";\r\n\r\n// const [data, setData] = useState({});\r\n// const [errors, setErrors] = useState({});\r\n\r\nexport const validate = (data, schema) => {\r\n  const result = Joi.validate(data, schema, {\r\n    abortEarly: false,\r\n  });\r\n  if (!result.error) return {yeah: \"\"};\r\n\r\n  const formErrors = {};\r\n  for (let item of result.error.details) {\r\n    formErrors[item.path[0]] = item.message;\r\n  }\r\n  return formErrors;\r\n};\r\n\r\nexport const validateProperty = ({ id, value }, schema) => {\r\n  const obj = { [id]: value };\r\n  const currentSchema = { [id]: schema[id] };\r\n  const { error } = Joi.validate(obj, currentSchema);\r\n  return error ? error.details[0].message : null;\r\n};\r\n\r\nexport const handleChange = (e, schema, data, setData, errors, setErrors) => {\r\n  const { id, value } = e.target;\r\n  setData((prevState) => ({\r\n    ...prevState,\r\n    [id]: value,\r\n  }));\r\n\r\n  const errorMessage = validateProperty({ id, value }, schema);\r\n  if (errorMessage) {\r\n    setErrors((prevState) => ({\r\n      ...prevState,\r\n      [id]: errorMessage,\r\n    }));\r\n  } else delete errors[id];\r\n\r\n};\r\n\r\nexport const handleSubmit = (e, data, schema, errors, setErrors, doSubmit) => {\r\n  e.preventDefault();\r\n  \r\n  setErrors(validate(data, schema));\r\n  console.log(errors);\r\n  // if (errors) return;\r\n\r\n  doSubmit();\r\n};\r\n"],"mappings":"AAAA,OAAOA,GAAG,MAAM,aAAa;AAC7B,SAASC,QAAQ,QAAQ,OAAO;;AAEhC;AACA;;AAEA,OAAO,MAAMC,QAAQ,GAAG,CAACC,IAAI,EAAEC,MAAM,KAAK;EACxC,MAAMC,MAAM,GAAGL,GAAG,CAACE,QAAQ,CAACC,IAAI,EAAEC,MAAM,EAAE;IACxCE,UAAU,EAAE;EACd,CAAC,CAAC;EACF,IAAI,CAACD,MAAM,CAACE,KAAK,EAAE,OAAO;IAACC,IAAI,EAAE;EAAE,CAAC;EAEpC,MAAMC,UAAU,GAAG,CAAC,CAAC;EACrB,KAAK,IAAIC,IAAI,IAAIL,MAAM,CAACE,KAAK,CAACI,OAAO,EAAE;IACrCF,UAAU,CAACC,IAAI,CAACE,IAAI,CAAC,CAAC,CAAC,CAAC,GAAGF,IAAI,CAACG,OAAO;EACzC;EACA,OAAOJ,UAAU;AACnB,CAAC;AAED,OAAO,MAAMK,gBAAgB,GAAG,OAAgBV,MAAM,KAAK;EAAA,IAA1B;IAAEW,EAAE;IAAEC;EAAM,CAAC;EAC5C,MAAMC,GAAG,GAAG;IAAE,CAACF,EAAE,GAAGC;EAAM,CAAC;EAC3B,MAAME,aAAa,GAAG;IAAE,CAACH,EAAE,GAAGX,MAAM,CAACW,EAAE;EAAE,CAAC;EAC1C,MAAM;IAAER;EAAM,CAAC,GAAGP,GAAG,CAACE,QAAQ,CAACe,GAAG,EAAEC,aAAa,CAAC;EAClD,OAAOX,KAAK,GAAGA,KAAK,CAACI,OAAO,CAAC,CAAC,CAAC,CAACE,OAAO,GAAG,IAAI;AAChD,CAAC;AAED,OAAO,MAAMM,YAAY,GAAG,CAACC,CAAC,EAAEhB,MAAM,EAAED,IAAI,EAAEkB,OAAO,EAAEC,MAAM,EAAEC,SAAS,KAAK;EAC3E,MAAM;IAAER,EAAE;IAAEC;EAAM,CAAC,GAAGI,CAAC,CAACI,MAAM;EAC9BH,OAAO,CAAEI,SAAS,KAAM;IACtB,GAAGA,SAAS;IACZ,CAACV,EAAE,GAAGC;EACR,CAAC,CAAC,CAAC;EAEH,MAAMU,YAAY,GAAGZ,gBAAgB,CAAC;IAAEC,EAAE;IAAEC;EAAM,CAAC,EAAEZ,MAAM,CAAC;EAC5D,IAAIsB,YAAY,EAAE;IAChBH,SAAS,CAAEE,SAAS,KAAM;MACxB,GAAGA,SAAS;MACZ,CAACV,EAAE,GAAGW;IACR,CAAC,CAAC,CAAC;EACL,CAAC,MAAM,OAAOJ,MAAM,CAACP,EAAE,CAAC;AAE1B,CAAC;AAED,OAAO,MAAMY,YAAY,GAAG,CAACP,CAAC,EAAEjB,IAAI,EAAEC,MAAM,EAAEkB,MAAM,EAAEC,SAAS,EAAEK,QAAQ,KAAK;EAC5ER,CAAC,CAACS,cAAc,EAAE;EAElBN,SAAS,CAACrB,QAAQ,CAACC,IAAI,EAAEC,MAAM,CAAC,CAAC;EACjC0B,OAAO,CAACC,GAAG,CAACT,MAAM,CAAC;EACnB;;EAEAM,QAAQ,EAAE;AACZ,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}