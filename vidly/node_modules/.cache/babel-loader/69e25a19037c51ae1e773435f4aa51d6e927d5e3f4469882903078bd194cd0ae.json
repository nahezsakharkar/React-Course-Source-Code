{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\NAHEZ SAKHARKAR\\\\OneDrive\\\\Desktop\\\\React Course Source Code\\\\vidly\\\\src\\\\components\\\\helpers\\\\form.jsx\";\nimport Joi from \"joi-browser\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const validate = (data, schema) => {\n  const result = Joi.validate(data, schema, {\n    abortEarly: false\n  });\n  if (!result.error) return null;\n  const formErrors = {};\n  for (let item of result.error.details) {\n    formErrors[item.path[0]] = item.message;\n  }\n  return formErrors;\n};\nexport const validateProperty = (_ref, schema) => {\n  let {\n    id,\n    value\n  } = _ref;\n  const obj = {\n    [id]: value\n  };\n  const currentSchema = {\n    [id]: schema[id]\n  };\n  const {\n    error\n  } = Joi.validate(obj, currentSchema);\n  return error ? error.details[0].message : null;\n};\nexport const handleChange = (e, schema, data, setData, errors, setErrors) => {\n  console.log(errors);\n  const {\n    id,\n    value\n  } = e.target;\n  setData(prevState => ({\n    ...prevState,\n    [id]: value\n  }));\n  const errorMessage = validateProperty({\n    id,\n    value\n  }, schema);\n  if (errorMessage) {\n    setErrors(prevState => ({\n      ...prevState,\n      [id]: errorMessage\n    }));\n  } else delete errors[id];\n};\nexport const handleSubmit = (e, data, schema, errors, setErrors, doSubmit) => {\n  var _validate;\n  e.preventDefault();\n  setErrors((_validate = validate(data, schema)) !== null && _validate !== void 0 ? _validate : {});\n  doSubmit();\n};\nexport const renderInput = (label, id, type, schema, data, setData, errors, setErrors) => {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"form-group mt-3\",\n    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n      htmlFor: id,\n      children: label\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      autoFocus: true,\n      onChange: e => handleChange(e, schema, data, setData, errors, setErrors),\n      value: data[id],\n      id: id,\n      type: type,\n      className: \"form-control mt-2\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this), errors[id] && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"alert alert-danger\",\n      children: errors[id]\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 22\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 60,\n    columnNumber: 5\n  }, this);\n};\nexport const renderSelect = (label, id, options, schema, data, setData, errors, setErrors) => {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"form-group mt-3\",\n    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n      htmlFor: id,\n      children: label\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n      onChange: e => handleChange(e, schema, data, setData, errors, setErrors),\n      value: data.genreId,\n      id: id,\n      className: \"form-control mt-2\",\n      children: [/*#__PURE__*/_jsxDEV(\"option\", {\n        value: \"\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }, this), options.map(option => /*#__PURE__*/_jsxDEV(\"option\", {\n        value: option._id,\n        children: option.name\n      }, option._id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 11\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }, this), errors[id] && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"alert alert-danger\",\n      children: errors[id]\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 22\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 88,\n    columnNumber: 5\n  }, this);\n};\nexport const renderButton = (buttonText, data, schema) => {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"mt-3\",\n    children: /*#__PURE__*/_jsxDEV(\"button\", {\n      disabled: validate(data, schema),\n      className: \"btn btn-primary\",\n      children: buttonText\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 112,\n    columnNumber: 5\n  }, this);\n};","map":{"version":3,"names":["Joi","validate","data","schema","result","abortEarly","error","formErrors","item","details","path","message","validateProperty","id","value","obj","currentSchema","handleChange","e","setData","errors","setErrors","console","log","target","prevState","errorMessage","handleSubmit","doSubmit","preventDefault","renderInput","label","type","renderSelect","options","genreId","map","option","_id","name","renderButton","buttonText"],"sources":["C:/Users/NAHEZ SAKHARKAR/OneDrive/Desktop/React Course Source Code/vidly/src/components/helpers/form.jsx"],"sourcesContent":["import Joi from \"joi-browser\";\r\n\r\nexport const validate = (data, schema) => {\r\n  const result = Joi.validate(data, schema, {\r\n    abortEarly: false,\r\n  });\r\n  if (!result.error) return null;\r\n\r\n  const formErrors = {};\r\n  for (let item of result.error.details) {\r\n    formErrors[item.path[0]] = item.message;\r\n  }\r\n  return formErrors;\r\n};\r\n\r\nexport const validateProperty = ({ id, value }, schema) => {\r\n  const obj = { [id]: value };\r\n  const currentSchema = { [id]: schema[id] };\r\n  const { error } = Joi.validate(obj, currentSchema);\r\n  return error ? error.details[0].message : null;\r\n};\r\n\r\nexport const handleChange = (e, schema, data, setData, errors, setErrors) => {\r\n  console.log(errors)\r\n\r\n  const { id, value } = e.target;\r\n  setData((prevState) => ({\r\n    ...prevState,\r\n    [id]: value,\r\n  }));\r\n\r\n  const errorMessage = validateProperty({ id, value }, schema);\r\n  if (errorMessage) {\r\n    setErrors((prevState) => ({\r\n      ...prevState,\r\n      [id]: errorMessage,\r\n    }));\r\n  } else delete errors[id];\r\n};\r\n\r\nexport const handleSubmit = (e, data, schema, errors, setErrors, doSubmit) => {\r\n  e.preventDefault();\r\n\r\n  setErrors(validate(data, schema) ?? {});\r\n\r\n  doSubmit();\r\n};\r\n\r\nexport const renderInput = (\r\n  label,\r\n  id,\r\n  type,\r\n  schema,\r\n  data,\r\n  setData,\r\n  errors,\r\n  setErrors\r\n) => {\r\n  return (\r\n    <div className=\"form-group mt-3\">\r\n      <label htmlFor={id}>{label}</label>\r\n      <input\r\n        autoFocus\r\n        onChange={(e) =>\r\n          handleChange(e, schema, data, setData, errors, setErrors)\r\n        }\r\n        value={data[id]}\r\n        id={id}\r\n        type={type}\r\n        className=\"form-control mt-2\"\r\n      />\r\n      {errors[id] && <div className=\"alert alert-danger\">{errors[id]}</div>}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport const renderSelect = (\r\n  label,\r\n  id,\r\n  options,\r\n  schema,\r\n  data,\r\n  setData,\r\n  errors,\r\n  setErrors\r\n) => {\r\n  return (\r\n    <div className=\"form-group mt-3\">\r\n      <label htmlFor={id}>{label}</label>\r\n      <select\r\n        onChange={(e) =>\r\n          handleChange(e, schema, data, setData, errors, setErrors)\r\n        }\r\n        value={data.genreId}\r\n        id={id}\r\n        className=\"form-control mt-2\"\r\n      >\r\n        <option value=\"\" />\r\n        {options.map((option) => (\r\n          <option key={option._id} value={option._id}>\r\n            {option.name}\r\n          </option>\r\n        ))}\r\n      </select>\r\n      {errors[id] && <div className=\"alert alert-danger\">{errors[id]}</div>}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport const renderButton = (buttonText, data, schema) => {\r\n  return (\r\n    <div className=\"mt-3\">\r\n      <button disabled={validate(data, schema)} className=\"btn btn-primary\">\r\n        {buttonText}\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}